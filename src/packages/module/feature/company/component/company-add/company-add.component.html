<div class="d-flex flex-shrink-0 align-items-center p-3">
    <p class="mat-title flex-grow-1 text-one-line mouse-inactive" [vi-translate]="'company.add.add'"></p>
    <button class="flex-shrink-0 ml-2" mat-raised-button color="primary" [disabled]="form.invalid || form.pristine" (click)="submit()">
        <span [vi-translate]="'general.save.save'"></span>
    </button>
</div>

<mat-progress-bar class="border flex-shrink-0" [mode]="isDisabled ? 'indeterminate' : 'determinate'"></mat-progress-bar>

<form class="flex-grow-1 px-3 pt-3 pb-2 row no-gutters vertical-scroll-only" #form="ngForm">
    <div class="col-12">
        <mat-form-field class="d-block">
            <input
                #innInput="ngModel"
                matInput
                name="inn"
                [(ngModel)]="preferences.inn"
                type="text"
                required
                [minlength]="innMinLength"
                [maxlength]="innMaxLength"
                [disabled]="isDisabled"
            />
            <button mat-icon-button matSuffix (click)="load()" [disabled]="isDisabled || innInput.errors">
                <span class="fas fa-arrow-alt-circle-down"></span>
            </button>
            <mat-placeholder [vi-translate]="'company.preferences.inn'"></mat-placeholder>
            <mat-error *ngIf="!(innInput.valid || !innInput.touched)" [innerHTML]="innInput.errors | viNgModelError"></mat-error>
        </mat-form-field>
    </div>

    <company-nalog-preferences [preferences]="preferences" [isDisabled]="!isNalogLoaded"></company-nalog-preferences>

    <div class="col-12">
        <mat-form-field class="d-block">
            <input
                #titleInput="ngModel"
                matInput
                name="title"
                [(ngModel)]="preferences.title"
                type="text"
                required
                [minlength]="titleMinLength"
                [maxlength]="titleMaxLength"
                [disabled]="isDisabled || !isNalogLoaded"
            />
            <mat-placeholder [vi-translate]="'company.preferences.title'"></mat-placeholder>
            <mat-error *ngIf="!(titleInput.valid || !titleInput.touched)" [innerHTML]="titleInput.errors | viNgModelError"></mat-error>
        </mat-form-field>
    </div>

    <div class="col-12">
        <mat-form-field class="d-block">
            <input
                #addressPostInput="ngModel"
                matInput
                name="addressPost"
                [(ngModel)]="preferences.addressPost"
                type="text"
                required
                [maxlength]="addressMaxLength"
                [disabled]="isDisabled || !isNalogLoaded"
            />
            <mat-placeholder [vi-translate]="'company.preferences.addressPost'"></mat-placeholder>
            <mat-error *ngIf="!(addressPostInput.valid || !addressPostInput.touched)" [innerHTML]="addressPostInput.errors | viNgModelError"></mat-error>
        </mat-form-field>
    </div>

    <div class="col-12">
        <mat-form-field class="d-block">
            <input
                #phoneInput="ngModel"
                matInput
                name="phone"
                [(ngModel)]="preferences.phone"
                type="text"
                [maxlength]="phoneMaxLength"
                [disabled]="isDisabled || !isNalogLoaded"
            />
            <mat-placeholder [vi-translate]="'company.preferences.phone'"></mat-placeholder>
            <mat-error *ngIf="!(phoneInput.valid || !phoneInput.touched)" [innerHTML]="phoneInput.errors | viNgModelError"></mat-error>
        </mat-form-field>
    </div>

    <div class="col-12">
        <mat-form-field class="d-block">
            <input
                #websiteInput="ngModel"
                matInput
                name="website"
                [(ngModel)]="preferences.website"
                type="text"
                [maxlength]="websiteMaxLength"
                [disabled]="isDisabled || !isNalogLoaded"
            />
            <mat-placeholder [vi-translate]="'company.preferences.website'"></mat-placeholder>
            <mat-error *ngIf="!(websiteInput.valid || !websiteInput.touched)" [innerHTML]="websiteInput.errors | viNgModelError"></mat-error>
        </mat-form-field>
    </div>
</form>
